Флаги

Конспект урока
Познакомимся с так называемыми "флагами", которые позволяют изменить поведение регулярных выражений и правила поиска совпадений в строке.

Обратите внимание на этот пример:

/aa/

aa aa aa

Регулярному выражению aa почему-то соответствует только одна подстрока в этой строке, хотя на самом деле мы видим, что их должно быть три. Это происходит, потому что по умолчанию регулярные выражения ищут только первое соответствие. Для того, чтобы изменить их поведение, используются флаги.

Если в течение этого курса вы уже пользовались редактором регулярных выражений или просто смотрели видео курса, то обратили внимание на поле, расположенное справа от шаблонной строки. Чаще всего в нём стоит флаг /g, который называется "глобальный" или global. Он включает поиск всех сопоставлений в строке и не останавливает поиск после первого совпадения. Давайте поставим флаг g. Теперь сопоставились все подстроки:

/aa        /g

aa aa aa

В этом курсе мы по умолчанию используем флаг g в наших примерах и не указываем его дополнительно, однако вы можете встретить его в составе регулярных выражений в тестах и практических заданиях, поэтому если увидите в конце регулярки /g, знайте — это флаг глобального поиска.

NB! Глобальный флаг часто используется в тех случаях, когда нужно не просто найти сопоставление регулярному выражению в строке, но и извлечь или иным образом использовать результаты поиска.

В зависимости от языка программирования флаги могут включаться непосредственно в сами регулярные выражения, или задаваться иными способами. Как именно это реализовано в конкретном языке, нужно смотреть в соответствующей документации.

Напоследок рассмотрим еще несколько флагов.

флаг /i включает режим игнорирования регистра:
/aa        /gi

aa Aa AA

флаг /s включает соответствие метасимвола . переводу строки, то есть делает так, что строка, в которой ищутся совпадения, может быть представлена как одна строчка. Иногда это может пригодиться.
Не напоминают ли вам флаги что-то, пройденное нами ранее? Верно, по сути — это более могущественные версии модификаторов, которые мы рассмотрели в восьмом уроке. Последние позволяют делать более точечные изменения правил сопоставления, в то время как флаги делают это на глобальном уровне.

Cуществует еще несколько флагов. Изучение остальных — ваше задание после этого урока. Зайдите в любой редактор регулярных выражений, прочитайте документацию по флагам, покрутите примеры из неё и обязательно попробуйте использовать каждый флаг.
